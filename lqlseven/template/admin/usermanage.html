<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{CSS_URL}/bootstrap.css">
    <script src="{JS_URL}/jquery-3.2.1.js"></script>
    <title>用户管理</title>
</head>
<body>
<div class="container" style="margin-top:30px;">
    <form action="index.php?m=admin&f=user&a=deluser" method="post">
        <table class="table table-hover" style="font-size:14px; ">
            <tr>
                <th>选择</th>
                <th>用户名称</th>
                <th>用户昵称</th>
                <th>用户等级</th>
                <th>用户电话</th>
                <th>操作</th>
            </tr>
            {foreach $lists as $v}
            <tr>
                <td><input type="checkbox" name="uid[]" value="{$v['uid']}"></td>
                <td>{$v['uname']}</td>
                <td>{$v['unicheng']}</td>
                <td>{$v['rname']}</td>
                <td>{$v['uphone']}</td>
                <td>
                    <a href="index.php?m=admin&f=user&a=edituser&uid={$v['uid']}" style="text-decoration: none">编辑</a>
                </td>
            </tr>
            {/foreach}
            <tr>
              <td colspan="3" align="center"  style="padding:20px 0 0 0;">
                  <span><input type="checkbox" id="checkAll" name="all" value="all"></span>
                  <span>全选</span>
              </td>
              <td colspan="3" align="center"  style="padding:20px 0 0 0;">
                  <button type="submit" style="border:none;background:#ea6f5a;
                color:#fff; font-size:14px;padding:6px 8px;border-radius:4px;">批量删除</button>
              </td>
            </tr>
        </table>
    </form>
    {$pages}
    <script>
        //多选框的实现
        var  checkboxs=$('input[type=checkbox]:not("#checkAll")');
        $('#checkAll').on('click',function(){
            for(let i=0;i<checkboxs.length;i++){
                checkboxs[i].checked=this.checked;
            }
        })
        checkboxs.on('click',function () {
            var isCheckedAll=true;
            for(let j=0;j<checkboxs.length;j++){
                if(!checkboxs[j].checked){
                    isCheckedAll=false;
                    break;
                }
            }
            $('#checkAll')[0].checked=isCheckedAll;
        })
    </script>
</div>
</body>
</html>